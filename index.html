<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>RBM Japan Portal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700;900&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');
        
        :root {
            --gold-dark: #b48811;
            --gold-light: #fcd34d;
            --gold-grad-start: #d4af37;
            --gold-grad-end: #aa8c2c;
            --bg-cream: #fdfbf7;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-cream); 
            color: #1c1917; 
            -webkit-tap-highlight-color: transparent; 
        }

        /* FONT KHUSUS JUDUL (SERIF) */
        .font-serif-display { font-family: 'Playfair Display', serif; }

        /* BACKGROUND MEWAH (MARBLE FEEL) */
        .royal-bg {
            background-color: #fdfbf7;
            background-image: 
                radial-gradient(at 10% 10%, hsla(43, 100%, 94%, 1) 0, transparent 50%), 
                radial-gradient(at 90% 90%, hsla(38, 100%, 92%, 1) 0, transparent 50%);
        }

        /* GLASS CARD PREMIUM */
        .glass-panel {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 30px -10px rgba(89, 74, 30, 0.08);
        }

        /* GOLD CARD (KARTU SPP) */
        .gold-card {
            background: linear-gradient(135deg, #d6ad3d 0%, #b08d28 100%);
            position: relative; overflow: hidden; color: white;
            box-shadow: 0 20px 30px -10px rgba(180, 136, 17, 0.4);
            border: 1px solid rgba(255,255,255,0.2);
        }
        /* Efek Kilau Emas */
        .gold-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            transform: rotate(30deg); pointer-events: none;
        }

        /* BUTTON GRADIENT GOLD */
        .btn-gold {
            background: linear-gradient(to right, #cc9c2b, #b58922);
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-gold:active { transform: scale(0.97); filter: brightness(90%); }

        /* ANIMATIONS */
        .fade-up { animation: fadeUp 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .ticker-wrap { overflow: hidden; white-space: nowrap; }
        .ticker-text { animation: marquee 30s linear infinite; display: inline-block; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* CUSTOM SCROLLBAR (Hidden) */
        .hide-scroll::-webkit-scrollbar { display: none; }
        
        /* TOAST & MODAL */
        #toast { visibility: hidden; opacity: 0; transition: all 0.4s; transform: translateY(20px); }
        #toast.show { visibility: visible; opacity: 1; transform: translateY(0); }
        .modal-backdrop { opacity: 0; pointer-events: none; transition: all 0.3s; background: rgba(28, 25, 23, 0.4); backdrop-filter: blur(4px); }
        .modal-backdrop.active { opacity: 1; pointer-events: auto; }
        .modal-content { transform: scale(0.90); opacity: 0; transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .modal-backdrop.active .modal-content { transform: scale(1); opacity: 1; }
    </style>
</head>
<body class="min-h-screen royal-bg text-stone-800">

    <div id="loader" class="fixed inset-0 z-50 bg-[#fdfbf7] flex flex-col items-center justify-center transition-opacity duration-700">
        <div class="relative w-20 h-20">
            <div class="absolute inset-0 border-2 border-amber-100 rounded-full"></div>
            <div class="absolute inset-0 border-2 border-amber-600 rounded-full border-t-transparent animate-spin"></div>
            <img src="logo.png" class="absolute inset-0 w-10 h-10 m-auto object-contain opacity-50" onerror="this.style.display='none'">
        </div>
        <p class="mt-6 text-[10px] font-bold text-amber-800 tracking-[0.3em] uppercase animate-pulse font-serif-display">RBM Japan</p>
    </div>

    <div id="app" class="relative z-10 hidden max-w-md mx-auto min-h-screen shadow-[0_0_60px_-15px_rgba(0,0,0,0.05)] bg-white/40 border-x border-white/50"></div>

    <div class="fixed bottom-10 left-0 right-0 z-[60] flex justify-center pointer-events-none">
        <div id="toast" class="bg-[#292524] text-amber-50 px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 text-xs font-medium tracking-wide">
            <i data-lucide="check-circle" class="text-amber-400" width="16"></i> <span id="toast-msg">Success</span>
        </div>
    </div>

    <div id="modal-transfer" class="modal-backdrop fixed inset-0 z-[70] flex items-center justify-center px-6">
        <div class="absolute inset-0" onclick="toggleModal(false)"></div>
        <div class="modal-content bg-[#fdfbf7] w-full max-w-sm rounded-[2rem] p-8 shadow-2xl relative z-10 border border-white">
            <div class="flex justify-between items-center mb-8">
                <h3 class="font-serif-display font-bold text-xl text-stone-800" id="modal-title">Bank Info</h3>
                <button onclick="toggleModal(false)" class="w-8 h-8 rounded-full bg-stone-100 flex items-center justify-center hover:bg-stone-200 transition"><i data-lucide="x" width="16" class="text-stone-500"></i></button>
            </div>
            
            <div class="bg-gradient-to-br from-white to-stone-50 border border-stone-200 rounded-2xl p-8 text-center shadow-sm mb-6 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-16 h-16 bg-amber-50 rounded-bl-full -mr-8 -mt-8"></div>
                
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Japan_Post_Bank_logo.svg/1200px-Japan_Post_Bank_logo.svg.png" class="h-6 mx-auto mb-6 opacity-80 mix-blend-multiply">
                
                <div class="mb-2">
                    <p class="text-[10px] text-stone-400 font-bold uppercase tracking-widest mb-1">Account Number</p>
                    <div class="flex items-center justify-center gap-2">
                        <h2 class="font-serif-display font-bold text-2xl text-stone-800 tracking-tight">10120-12345678</h2>
                    </div>
                </div>
                <p class="text-xs font-bold text-amber-700 uppercase tracking-wider mt-2">a.n RBM JAPAN ADMIN</p>
            </div>

            <button onclick="copyText('10120-12345678', 'No. Rekening')" class="w-full btn-gold py-4 rounded-xl text-xs font-bold uppercase tracking-widest shadow-lg shadow-amber-200/50">
                Copy Number
            </button>
        </div>
    </div>

    <script>
        // --- CONFIG ---
        const API_URL = "https://script.google.com/macros/s/AKfycbz2a5-sm2_gLBPF5jpTmZfBuN9PppkvUI3nXIyOJbYJ4XDZA3SDE7-FNU784ZxfSZjr/exec"; 
        const WEBSITE_URL = "https://rbj-site.vercel.app/";
        const ADMIN_WA = "6285819809668";
        
        let DATA_SISWA = [], DATA_HARGA = {}, KABAR_RBM = [], INFO_PENGUMUMAN = {};
        let STATE = { view: 'login', user: null, lang: 'id' };
        
        const DAY_NAMES = {
            id: { 'Senin': 'Senin', 'Selasa': 'Selasa', 'Rabu': 'Rabu', 'Kamis': 'Kamis', 'Jumat': 'Jumat', 'Sabtu': 'Sabtu', 'Ahad': 'Ahad' },
            en: { 'Senin': 'Monday', 'Selasa': 'Tuesday', 'Rabu': 'Wednesday', 'Kamis': 'Thursday', 'Jumat': 'Friday', 'Sabtu': 'Saturday', 'Ahad': 'Sunday' }
        };

        // --- LANGUAGE DICTIONARY ---
        const TEKS = {
            id: { 
                btn: "Masuk Portal", search_ph: "Cari Nama Siswa...", web_link: "Website Ruang Belajar",
                greet: ["Selamat Pagi", "Selamat Siang", "Selamat Sore", "Selamat Malam"],
                spp_label: "Tagihan Infaq (Bulan Ini)", 
                pay_status: "Status Pembayaran", status_unpaid: "Belum Ada Pembayaran", status_paid: "Lunas",
                report: "Izin", 
                btn_wa: "Konfirmasi\nWhatsApp", btn_bank: "Info\nRekening", btn_copy: "Salin\nRincian",
                news_title: "Kabar Terbaru", no_news: "Belum ada kabar terbaru",
                schedule_title: "Jadwal Kelas", no_schedule: "Tidak ada jadwal",
                notes_title: "Catatan Ustadz/ah", no_notes: "Tidak ada catatan",
                toast_copy: "Berhasil disalin", modal_title: "Info Rekening", copy_btn: "Salin Nomor"
            },
            en: { 
                btn: "Enter Portal", search_ph: "Search Student Name...", web_link: "Official Website",
                greet: ["Good Morning", "Good Afternoon", "Good Evening", "Good Night"],
                spp_label: "Tuition Fee (Current Month)", 
                pay_status: "Payment Status", status_unpaid: "Payment Pending", status_paid: "Paid",
                report: "Absence", 
                btn_wa: "Confirm\nWhatsApp", btn_bank: "Bank\nDetails", btn_copy: "Copy\nDetails",
                news_title: "Latest News", no_news: "No news available",
                schedule_title: "Class Schedule", no_schedule: "No schedule",
                notes_title: "Teacher Notes", no_notes: "No notes available",
                toast_copy: "Copied to clipboard", modal_title: "Bank Details", copy_btn: "Copy Number"
            }
        };

        // --- FUNCTIONS ---
        async function ambilData() {
            const cache = localStorage.getItem('rbm_gold_cache');
            if (cache) {
                const p = JSON.parse(cache);
                DATA_SISWA = p.s; DATA_HARGA = p.p; KABAR_RBM = p.n; INFO_PENGUMUMAN = p.i;
                finishLoad();
            }
            try {
                const res = await fetch(API_URL);
                const d = await res.json();
                localStorage.setItem('rbm_gold_cache', JSON.stringify({s:d.students, p:d.prices, n:d.news, i:d.info}));
                DATA_SISWA = d.students; DATA_HARGA = d.prices; KABAR_RBM = d.news; INFO_PENGUMUMAN = d.info;
                if(!cache) finishLoad(); else renderApp();
            } catch (e) { if(!cache) finishLoad(); }
        }

        function finishLoad() {
            const l = document.getElementById('loader');
            l.style.opacity = '0';
            setTimeout(() => { l.style.display = 'none'; document.getElementById('app').classList.remove('hidden'); renderApp(); }, 600);
        }

        function toggleModal(show) {
            const m = document.getElementById('modal-transfer');
            document.getElementById('modal-title').innerText = TEKS[STATE.lang].modal_title;
            const btn = m.querySelector('button.btn-gold');
            if(btn) btn.innerText = TEKS[STATE.lang].copy_btn;
            
            if(show) m.classList.add('active'); else m.classList.remove('active');
        }

        function copyText(text, label) {
            navigator.clipboard.writeText(text).then(() => {
                document.getElementById('toast-msg').innerText = `${label} ${TEKS[STATE.lang].toast_copy}`;
                document.getElementById('toast').classList.add('show');
                setTimeout(() => document.getElementById('toast').classList.remove('show'), 3000);
            });
        }

        function salinRincian(nama, total, status) {
            const t = TEKS[STATE.lang];
            const st = status && status.toLowerCase().includes('lunas') ? t.status_paid : t.status_unpaid;
            const txt = `RBM INVOICE\nName: ${nama}\nTotal: Â¥${parseInt(total).toLocaleString('ja-JP')}\nStatus: ${st}`;
            copyText(txt, "Invoice");
        }

        function getGreet() {
            const h = new Date().getHours();
            const g = TEKS[STATE.lang].greet;
            if (h < 11) return g[0]; if (h < 15) return g[1]; if (h < 19) return g[2]; return g[3];
        }

        // --- RENDER ---
        function renderApp() {
            const app = document.getElementById('app');
            const t = TEKS[STATE.lang];

            if (STATE.view === 'login') {
                const sorted = [...DATA_SISWA].sort((a,b) => a.name.localeCompare(b.name));
                let opsi = `<option value="" disabled selected>${t.search_ph}</option>` + sorted.map(s => `<option value="${s.id}">${s.name}</option>`).join('');
                
                app.innerHTML = `
                <div class="min-h-screen flex flex-col items-center justify-center p-8 fade-up relative">
                    
                    <button onclick="STATE.lang=STATE.lang==='id'?'en':'id';renderApp()" class="absolute top-8 right-8 text-[10px] font-bold bg-white border border-amber-200 text-amber-800 px-4 py-2 rounded-full uppercase shadow-sm tracking-widest hover:bg-amber-50 transition z-30">
                        ${STATE.lang}
                    </button>

                    <div class="w-full max-w-sm relative z-10">
                        <div class="text-center mb-12">
                            <div class="inline-flex items-center justify-center w-24 h-24 bg-white rounded-full shadow-[0_10px_40px_-10px_rgba(217,119,6,0.3)] mb-8 border border-amber-50">
                                <img src="logo.png" class="h-10 object-contain opacity-90" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2991/2991148.png'">
                            </div>
                            
                            <h1 class="font-serif-display font-bold text-4xl text-stone-800 mb-3 tracking-tight">RBM Portal</h1>
                            
                            <div class="flex items-center justify-center gap-2">
                                <div class="h-[1px] w-8 bg-amber-300"></div>
                                <p class="text-amber-700 text-[10px] font-bold uppercase tracking-[0.2em]">Istiqomah di atas Sunnah</p>
                                <div class="h-[1px] w-8 bg-amber-300"></div>
                            </div>
                        </div>

                        <div class="glass-panel p-1 rounded-[2.5rem]">
                            <div class="bg-white/80 rounded-[2.3rem] p-8 border border-white">
                                <div class="relative mb-6 group">
                                    <select id="selSiswa" class="w-full p-4 pl-6 bg-[#fcfaf7] border border-stone-200 rounded-2xl text-sm font-semibold text-stone-700 outline-none focus:ring-2 focus:ring-amber-400/50 appearance-none transition shadow-inner font-serif-display cursor-pointer">${opsi}</select>
                                    <div class="absolute right-5 top-1/2 -translate-y-1/2 text-stone-400 pointer-events-none"><i data-lucide="chevron-down" width="16"></i></div>
                                </div>
                                <button onclick="const id=document.getElementById('selSiswa').value; if(id){STATE.user=DATA_SISWA.find(s=>s.id===id);STATE.view='dashboard';renderApp()}" class="w-full btn-gold py-4 rounded-2xl font-bold text-xs uppercase tracking-[0.15em] shadow-lg shadow-amber-500/30">
                                    ${t.btn}
                                </button>
                                
                                <div class="mt-8 text-center">
                                    <a href="${WEBSITE_URL}" target="_blank" class="text-[10px] font-semibold text-stone-400 hover:text-amber-600 transition flex items-center justify-center gap-2">
                                        <span>${t.web_link}</span> <i data-lucide="arrow-up-right" width="12"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else {
                const s = STATE.user;
                let total = 0; s.classes.forEach(c => { total += (DATA_HARGA[c.split('(')[0].trim()] || 0); });
                if (s.role == 2) total *= 0.5;

                const stRaw = s.payments["Bulan Ini"];
                const isPaid = stRaw && stRaw.toLowerCase().includes('lunas');
                const stText = isPaid ? t.status_paid : t.status_unpaid;

                app.innerHTML = `
                <div class="pb-24 fade-up">
                    <div class="pt-12 px-8 pb-6 flex justify-between items-end">
                        <div>
                            <p class="text-stone-400 text-[10px] font-bold uppercase tracking-widest mb-1">${getGreet()}</p>
                            <h2 class="font-serif-display font-bold text-3xl text-stone-800 leading-none">${s.name.split(' ')[0]}</h2>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="STATE.lang=STATE.lang==='id'?'en':'id';renderApp()" class="w-10 h-10 rounded-full border border-stone-200 bg-white text-stone-600 text-[10px] font-bold uppercase flex items-center justify-center hover:bg-stone-50 transition">${STATE.lang}</button>
                            <button onclick="location.reload()" class="w-10 h-10 rounded-full border border-stone-200 bg-white text-stone-400 flex items-center justify-center hover:text-red-500 hover:border-red-200 transition"><i data-lucide="log-out" width="16"></i></button>
                        </div>
                    </div>

                    <div class="px-6 space-y-6">
                        
                        <div class="gold-card rounded-[2.5rem] p-8 group transform transition duration-500 hover:scale-[1.01]">
                            <div class="flex justify-between items-start mb-10 relative z-10">
                                <div>
                                    <p class="text-[9px] font-bold text-amber-100 uppercase tracking-widest mb-2 opacity-90">${t.spp_label}</p>
                                    <h1 class="font-serif-display font-bold text-4xl tracking-tight text-white shadow-sm">Â¥${total.toLocaleString('ja-JP')}</h1>
                                </div>
                                <div class="w-12 h-8 rounded-lg bg-white/20 border border-white/30 backdrop-blur-sm flex items-center justify-center shadow-inner">
                                    <div class="w-8 h-5 border border-white/40 rounded-[2px]"></div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-end relative z-10">
                                <div>
                                    <p class="text-[9px] text-amber-100 uppercase mb-2 font-bold tracking-wider">${t.pay_status}</p>
                                    <span class="inline-flex items-center gap-2 bg-black/20 backdrop-blur-md px-4 py-2 rounded-full text-[10px] font-bold border border-white/10 text-white">
                                        <div class="w-2 h-2 rounded-full ${isPaid ?'bg-emerald-400':'bg-amber-300 animate-pulse'}"></div> 
                                        ${stText}
                                    </span>
                                </div>
                                <button onclick="laporIzin('${s.name}', '${s.id}')" class="bg-[#fdfbf7] text-amber-800 px-5 py-3 rounded-2xl text-[10px] font-bold uppercase tracking-wider shadow-lg hover:bg-white transition flex items-center gap-2">
                                    <span>${t.report}</span> <i data-lucide="arrow-right" width="12"></i>
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-3 gap-4">
                            <button onclick="window.open('https://wa.me/${ADMIN_WA}?text=Konfirmasi SPP ${s.name} Total: Â¥${total}')" class="glass-panel p-5 rounded-3xl flex flex-col items-center gap-3 hover:bg-white transition group">
                                <div class="w-12 h-12 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center group-hover:scale-110 transition border border-amber-100 shadow-sm"><i data-lucide="message-circle" width="20"></i></div>
                                <span class="text-[10px] font-bold text-stone-600 text-center leading-tight whitespace-pre-line uppercase tracking-wide">${t.btn_wa}</span>
                            </button>
                            
                            <button onclick="toggleModal(true)" class="glass-panel p-5 rounded-3xl flex flex-col items-center gap-3 hover:bg-white transition group">
                                <div class="w-12 h-12 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center group-hover:scale-110 transition border border-amber-100 shadow-sm"><i data-lucide="landmark" width="20"></i></div>
                                <span class="text-[10px] font-bold text-stone-600 text-center leading-tight whitespace-pre-line uppercase tracking-wide">${t.btn_bank}</span>
                            </button>

                            <button onclick="salinRincian('${s.name}', '${total}', '${stRaw}')" class="glass-panel p-5 rounded-3xl flex flex-col items-center gap-3 hover:bg-white transition group">
                                <div class="w-12 h-12 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center group-hover:scale-110 transition border border-amber-100 shadow-sm"><i data-lucide="copy" width="20"></i></div>
                                <span class="text-[10px] font-bold text-stone-600 text-center leading-tight whitespace-pre-line uppercase tracking-wide">${t.btn_copy}</span>
                            </button>
                        </div>

                        ${INFO_PENGUMUMAN.aktif ? `
                        <div class="bg-amber-50 border border-amber-100 rounded-2xl p-1 overflow-hidden">
                            <div class="bg-white/50 rounded-xl px-4 py-3">
                                <div class="ticker-text text-[11px] font-bold text-amber-800 italic font-serif-display">ðŸ”” ${STATE.lang==='id'?INFO_PENGUMUMAN.teks_id:INFO_PENGUMUMAN.teks_en}</div>
                            </div>
                        </div>` : ''}

                        <div class="space-y-8 pb-4">
                            <section>
                                <div class="flex items-center gap-3 mb-4 px-1">
                                    <div class="h-6 w-1 bg-amber-400 rounded-full"></div>
                                    <h3 class="font-serif-display font-bold text-stone-800 text-lg">${t.news_title}</h3>
                                </div>
                                <div class="flex gap-5 overflow-x-auto pb-6 px-1 snap-x hide-scroll">
                                    ${KABAR_RBM.map(k => `
                                    <div class="min-w-[260px] bg-white rounded-3xl border border-stone-100 overflow-hidden shadow-sm snap-center group">
                                        <div class="h-32 bg-stone-100 relative overflow-hidden">
                                            <img src="${k.foto}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                                            <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
                                            <span class="absolute bottom-3 left-3 text-[9px] font-bold text-white bg-white/20 backdrop-blur-md px-2 py-1 rounded uppercase tracking-wider">${k.tgl}</span>
                                        </div>
                                        <div class="p-5">
                                            <h4 class="text-sm font-bold text-stone-800 line-clamp-2 leading-snug font-serif-display">${k.judul}</h4>
                                        </div>
                                    </div>`).join('') || `<div class="w-full py-8 text-center text-xs text-stone-400 italic bg-white/50 rounded-3xl border border-dashed border-stone-200">${t.no_news}</div>`}
                                </div>
                            </section>

                            <div class="grid gap-6">
                                <section>
                                    <div class="flex items-center gap-3 mb-4 px-1">
                                        <div class="h-6 w-1 bg-stone-300 rounded-full"></div>
                                        <h3 class="font-serif-display font-bold text-stone-800 text-lg">${t.schedule_title}</h3>
                                    </div>
                                    <div class="space-y-3">
                                        ${s.schedule.map(sc => `
                                        <div class="bg-white p-4 rounded-3xl border border-stone-100 flex items-center gap-4 shadow-[0_2px_15px_-5px_rgba(0,0,0,0.03)] hover:shadow-md transition">
                                            <div class="w-14 h-14 bg-[#fdfbf7] rounded-2xl flex flex-col items-center justify-center border border-amber-100/50">
                                                <span class="text-[10px] font-black text-amber-600 uppercase tracking-widest">${(DAY_NAMES[STATE.lang][sc.day] || sc.day).substring(0,3)}</span>
                                            </div>
                                            <div>
                                                <p class="text-sm font-bold text-stone-800 font-serif-display">${sc.subject}</p>
                                                <p class="text-[10px] text-stone-400 font-bold flex items-center gap-1 mt-0.5"><i data-lucide="clock" width="10"></i> ${sc.time} JST</p>
                                            </div>
                                        </div>`).join('') || `<p class="text-xs text-stone-400 italic text-center py-6 bg-white/50 rounded-3xl border border-dashed border-stone-200">${t.no_schedule}</p>`}
                                    </div>
                                </section>

                                <section>
                                    <div class="flex items-center gap-3 mb-4 px-1">
                                        <div class="h-6 w-1 bg-stone-300 rounded-full"></div>
                                        <h3 class="font-serif-display font-bold text-stone-800 text-lg">${t.notes_title}</h3>
                                    </div>
                                    <div class="space-y-3">
                                        ${s.notes.map(n => `
                                        <div class="bg-white p-6 rounded-3xl border border-stone-100 shadow-sm relative overflow-hidden">
                                            <div class="absolute top-0 right-0 w-20 h-20 bg-stone-50 rounded-full -mr-10 -mt-10 opacity-50"></div>
                                            <div class="flex justify-between items-center mb-3 relative z-10">
                                                <span class="text-[9px] font-bold text-white bg-stone-800 px-2 py-1 rounded uppercase tracking-wider">${n.date}</span>
                                                <i data-lucide="quote" class="text-amber-200 fill-current" width="16"></i>
                                            </div>
                                            <p class="text-xs text-stone-600 font-medium leading-relaxed relative z-10">"${n.message}"</p>
                                        </div>`).join('') || `<p class="text-xs text-stone-400 italic text-center py-6 bg-white/50 rounded-3xl border border-dashed border-stone-200">${t.no_notes}</p>`}
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>`;
            }
            lucide.createIcons();
        }

        ambilData();
        function laporIzin(nama, id) { window.open(`https://wa.me/${ADMIN_WA}?text=Assalamu'alaikum, izin untuk murid ${nama} (${id})...`); }
    </script>
</body>
</html>
